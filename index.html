<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2a2a2a">
    <title>Hidden Ships FAQ</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}:root{--copper:#b87333;--copper-dark:#8b5a2b;--cream:#f5f0e6;--charcoal:#2a2a2a;--oak:#4a3728;--safe-top:env(safe-area-inset-top);--safe-bottom:env(safe-area-inset-bottom)}html,body{height:100%;overflow:hidden}body{font-family:'Source Sans Pro',sans-serif;background:var(--charcoal);color:var(--cream);display:flex;flex-direction:column}header{flex-shrink:0;text-align:center;padding:calc(20px + var(--safe-top)) 20px 12px;background:var(--charcoal);border-bottom:1px solid rgba(184,115,51,0.3)}.header-title{display:flex;align-items:center;justify-content:center;gap:12px}.logo{width:36px;height:36px;filter:invert(1) sepia(1) saturate(2) hue-rotate(350deg) brightness(0.85)}h1{font-family:'Playfair Display',serif;font-size:1.6rem;color:var(--copper);letter-spacing:2px}.admin-link{font-size:0.75rem;color:rgba(245,240,230,0.4);margin-top:6px;cursor:pointer;padding:8px}.admin-mode .admin-link{color:var(--copper)}.search-box{flex-shrink:0;padding:16px;background:var(--charcoal)}.search-box input{width:100%;padding:16px 20px;font-size:16px;font-family:'Source Sans Pro',sans-serif;background:rgba(255,255,255,0.1);border:2px solid var(--copper-dark);border-radius:8px;color:var(--cream);outline:none}.search-box input::placeholder{color:rgba(245,240,230,0.4)}.search-box input:focus{border-color:var(--copper);background:rgba(255,255,255,0.15)}.results-container{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0 16px calc(20px + var(--safe-bottom))}.result-count{font-size:0.8rem;color:rgba(245,240,230,0.5);padding:8px 0 12px}.results{display:flex;flex-direction:column;gap:12px}.faq-item{background:rgba(74,55,40,0.5);border-left:3px solid var(--copper);padding:18px;border-radius:0 8px 8px 0;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative}.faq-item:active{background:rgba(74,55,40,0.8)}.faq-item.expanded{background:rgba(74,55,40,0.7)}.faq-header{display:flex;justify-content:space-between;align-items:flex-start;gap:10px}.faq-header-left{flex:1}.faq-category{display:inline-block;font-size:0.65rem;text-transform:uppercase;letter-spacing:1.5px;color:var(--copper);margin-bottom:6px}.faq-question{font-weight:600;font-size:1rem;color:var(--cream);line-height:1.4;padding-right:20px}.faq-toggle{font-size:1.5rem;line-height:1;color:var(--copper);transition:transform 0.2s ease;flex-shrink:0;width:24px;text-align:center}.faq-item.expanded .faq-toggle{transform:rotate(45deg)}.faq-answer{display:none;margin-top:14px;padding-top:14px;border-top:1px solid rgba(184,115,51,0.3);color:rgba(245,240,230,0.9);line-height:1.7;font-size:0.95rem}.faq-item.expanded .faq-answer{display:block}.edit-btn{display:none;padding:8px 14px;background:var(--copper);color:white;border:none;border-radius:6px;font-size:0.8rem;cursor:pointer;flex-shrink:0}.admin-mode .edit-btn{display:block}.no-results{text-align:center;padding:60px 20px;color:rgba(245,240,230,0.5)}.no-results span{display:block;font-size:3rem;margin-bottom:16px}.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:100;padding:20px;overflow-y:auto}.modal.active{display:flex;flex-direction:column}.modal-content{background:var(--charcoal);border:1px solid var(--copper-dark);border-radius:12px;padding:24px;margin:auto;width:100%;max-width:500px}.modal h2{font-family:'Playfair Display',serif;color:var(--copper);margin-bottom:20px;font-size:1.3rem}.modal label{display:block;font-size:0.8rem;color:rgba(245,240,230,0.6);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px}.modal input,.modal textarea{width:100%;padding:14px;font-size:16px;font-family:'Source Sans Pro',sans-serif;background:rgba(255,255,255,0.1);border:1px solid var(--copper-dark);border-radius:6px;color:var(--cream);margin-bottom:16px;outline:none}.modal textarea{min-height:120px;resize:vertical}.modal input:focus,.modal textarea:focus{border-color:var(--copper)}.modal-buttons{display:flex;gap:12px;margin-top:8px}.modal-buttons button{flex:1;padding:14px;font-size:1rem;font-family:'Source Sans Pro',sans-serif;border:none;border-radius:6px;cursor:pointer}.btn-save{background:var(--copper);color:white}.btn-cancel{background:rgba(255,255,255,0.1);color:var(--cream)}.btn-delete{background:#8b3a3a;color:white;margin-top:12px;width:100%;padding:14px;font-size:1rem;border:none;border-radius:6px;cursor:pointer}.btn-add{display:none;width:100%;padding:16px;margin-bottom:16px;background:rgba(184,115,51,0.3);border:2px dashed var(--copper-dark);border-radius:8px;color:var(--copper);font-size:1rem;cursor:pointer}.admin-mode .btn-add{display:block}.admin-banner{display:none;background:var(--copper);color:white;text-align:center;padding:10px;font-size:0.85rem}.admin-mode .admin-banner{display:block}.sync-status{font-size:0.7rem;color:rgba(245,240,230,0.4);text-align:center;padding:8px}
    </style>
</head>
<body>
    <div class="admin-banner">‚úèÔ∏è Edit Mode ‚Äî Tap "Andy & Amy" to exit</div>
    <header>
        <div class="header-title">
            <img src="logo.png" style="width:36px;height:36px;filter:invert(1) sepia(1) saturate(2) hue-rotate(350deg) brightness(0.85)"> <h1>HIDDEN SHIPS</h1>
        </div>
        <p class="admin-link" id="adminLink">Andy & Amy</p>
    </header>
    <div class="search-box">
        <input type="text" id="search" placeholder="Search..." autocomplete="off" autocorrect="off" spellcheck="false">
    </div>
    <div class="results-container">
        <button class="btn-add" id="addBtn">+ Add New FAQ</button>
        <p class="result-count" id="resultCount"></p>
        <div class="results" id="results"></div>
        <p class="sync-status" id="syncStatus"></p>
    </div>
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <h2>Enter Password</h2>
            <label>Password</label>
            <input type="password" id="passwordInput" placeholder="Enter admin password">
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal('passwordModal')">Cancel</button>
                <button class="btn-save" onclick="checkPassword()">Enter</button>
            </div>
        </div>
    </div>
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2 id="editTitle">Add FAQ</h2>
            <label>Category</label>
            <input type="text" id="editCategory" placeholder="e.g. Bourbon, Our Story, General">
            <label>Question</label>
            <input type="text" id="editQuestion" placeholder="What customers ask...">
            <label>Answer</label>
            <textarea id="editAnswer" placeholder="What to tell them..."></textarea>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal('editModal')">Cancel</button>
                <button class="btn-save" onclick="saveFAQ()">Save</button>
            </div>
            <button class="btn-delete" id="deleteBtn" onclick="deleteFAQ()">Delete This FAQ</button>
        </div>
    </div>
    <script>
        const JSONBIN_ID='692b981243b1c97be9cd91a1';
        const JSONBIN_ACCESS_KEY='$2a$10$m8.0VJeJjiv5syZDEsQBLuIRb/daybg0aWqk5DGwSVPLtmj2B4bGu';
        const JSONBIN_MASTER_KEY='$2a$10$OXI6X0KDRW0WA/jQ4V75C.tYhOlaz70oufj62wTNi3pT0T.FELZyG';
        const ADMIN_PASSWORD='hiddenships';
        let faqs=[];
        let editingIndex=-1;
        let isAdminMode=false;
        const defaultFAQs=[
            {category:"Our Story",question:"How did Hidden Ships start?",answer:"Andy, our head distiller, was a Marine for 21 years. After retiring, he and his wife Amy took a cross-country trip. A great experience at Muddy River Distillery convinced Andy to go distillery over brewery. They went to Moonshine University, then opened Hidden Ships."},
            {category:"Our Story",question:"Why is it called Hidden Ships?",answer:"Pirates used to hide in the inlets behind Topsail Island to ambush merchant ships. Merchants started looking for top sails over the island‚Äîthat's how Topsail got its name. We pay homage to those ships hiding in the inlets."},
            {category:"Our Story",question:"What's the deal with the logo?",answer:"It's a block H with an art deco 1920s vibe. Look closely: there's an S hidden in the middle of the H. A hidden ship in the Hidden Ships logo."},
            {category:"Our Story",question:"Why the Buffalo Bills stuff?",answer:"Andy and Amy found a Bills backer bar everywhere on their cross-country trip. It always felt like home. So we're officially a Buffalo Bills backer bar too."},
            {category:"Awards",question:"What awards have we won?",answer:"Gold for vodka, gold for gin, gold for rested gin, and double gold for bourbon‚Äîall in international competitions. Double gold is the highest."},
            {category:"Vodka",question:"What's our vodka made from?",answer:"100% corn, like all American vodkas. Russians use winter wheat, not potatoes. Only Poland still uses potatoes (Chopin is the brand)."},
            {category:"Vodka",question:"What does our vodka taste like?",answer:"It's a 'booze ninja'‚Äîshows up, makes the drink alcoholic, disappears. Clean and neutral with a hint of citrus. No long bitter finish. Perfect for espresso martinis."},
            {category:"Gin",question:"What kind of gin do we make?",answer:"A botanical gin, not a London dry. We hit the 51% juniper minimum and then explore with other botanicals."},
            {category:"Gin",question:"What's in our gin?",answer:"Juniper, orange peel, lemon peel, lemon verbena, ginger, clove, elderberry, angelica root, licorice root, and coriander."},
            {category:"Gin",question:"What does our gin taste like?",answer:"Three waves: pine and Christmas tree, then citrus, then white flower notes‚Äîlike baby's breath or lily."},
            {category:"Gin",question:"Where did the gin recipe come from?",answer:"Third-generation recipe‚Äîour consultant's wife's grandmother's recipe won the blind taste test."},
            {category:"Rested Gin",question:"What's different about the rested gin?",answer:"Same gin, aged 6 months in new American oak. Also won gold."},
            {category:"Rested Gin",question:"Who is rested gin for?",answer:"Call it a 'bourbon drinker's gin.' Great for people who don't usually like gin‚Äîthe oak connects it to bourbon flavors."},
            {category:"White Rum",question:"What's our rum made from?",answer:"50/50 blend of molasses and golden sugar."},
            {category:"White Rum",question:"What does white rum taste like?",answer:"Butterscotch on the nose and palate, buttery texture. People love it."},
            {category:"Rested Rum",question:"What's different about rested rum?",answer:"Same rum, aged 6 months in used bourbon barrels, plus amberwood from South America."},
            {category:"Rested Rum",question:"What does rested rum taste like?",answer:"Maple and brown sugar with vanilla and cinnamon. Finishes on coconut‚Äîyour brain puts that together from the creamy notes."},
            {category:"Bourbon",question:"What's in our bourbon?",answer:"78% corn, 14% rye, 8% malted barley. A 'mild rye' bourbon."},
            {category:"Bourbon",question:"What does our bourbon taste like?",answer:"Leather and tobacco from the char, vanilla and cinnamon from the wood, plus dry sherry complexity. Stands up great in cocktails."},
            {category:"Bourbon",question:"What makes our bourbon special?",answer:"Dry sherry-soaked wood spirals in the last 2 months of aging. Adds complexity without sweetness‚Äîperfect for old fashioneds."},
            {category:"Bourbon",question:"Why dry sherry instead of sweet?",answer:"Balance. Bourbon is already sweet. Old fashioneds have sugar. Dry sherry adds complexity without more sweetness."},
            {category:"Rye",question:"What's in our rye whiskey?",answer:"51% rye with corn and malted barley. Cabernet finish."},
            {category:"Our Philosophy",question:"What makes Hidden Ships different?",answer:"We're bartenders who distill. We care about how spirits perform in cocktails‚Äîthat's where they end up."},
            {category:"General",question:"What does 'proof' mean?",answer:"Double the alcohol percentage. 80 proof = 40% ABV."},
            {category:"General",question:"Is gin just flavored vodka?",answer:"Yes. Gin is vodka with botanicals. The requirement is 51% juniper."},
            {category:"Tasting Tips",question:"How should customers smell spirits?",answer:"With their mouth open. Gives the ethanol an escape route so you smell the spirit, not just alcohol."},
            {category:"Retail",question:"Can customers buy bottles on Sunday?",answer:"Yes! We're the only place in the area that sells on Sundays. Big deal in NC."},
            {category:"Retail",question:"Where else can people buy our bottles?",answer:"Onslow County, Pender County, and here at the distillery."}
        ];
        async function loadFAQs(){
            updateSyncStatus('Loading...');
            if(JSONBIN_ID&&JSONBIN_ACCESS_KEY){
                try{
                    const res=await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_ID}/latest`,{method:'GET',headers:{'X-Access-Key':JSONBIN_ACCESS_KEY,'X-Bin-Meta':'false'}});
                    if(res.ok){const data=await res.json();if(data&&data.faqs&&data.faqs.length>0){faqs=data.faqs;localStorage.setItem('hiddenships_faqs',JSON.stringify(faqs));updateSyncStatus('Synced ‚úì');renderFAQs(faqs);return;}}
                }catch(e){console.log('Cloud sync failed:',e);}
            }
            const stored=localStorage.getItem('hiddenships_faqs');
            if(stored){faqs=JSON.parse(stored);updateSyncStatus('Using local data');}
            else{faqs=defaultFAQs;localStorage.setItem('hiddenships_faqs',JSON.stringify(faqs));updateSyncStatus('Loaded defaults');}
            renderFAQs(faqs);
        }
        async function saveFAQsToStorage(){
            localStorage.setItem('hiddenships_faqs',JSON.stringify(faqs));
            updateSyncStatus('Saving...');
            if(JSONBIN_ID&&JSONBIN_MASTER_KEY){
                try{
                    const res=await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_ID}`,{method:'PUT',headers:{'Content-Type':'application/json','X-Master-Key':JSONBIN_MASTER_KEY},body:JSON.stringify({faqs})});
                    if(res.ok){updateSyncStatus('Saved & synced ‚úì');}else{updateSyncStatus('Saved locally');}
                }catch(e){updateSyncStatus('Saved locally');}
            }else{updateSyncStatus('Saved locally');}
        }
        function updateSyncStatus(msg){const el=document.getElementById('syncStatus');el.textContent=msg;if(msg.includes('‚úì')){setTimeout(()=>{el.textContent='';},2000);}}
        function renderFAQs(items){
            const resultsContainer=document.getElementById('results');
            const resultCount=document.getElementById('resultCount');
            if(items.length===0){resultsContainer.innerHTML=`<div class="no-results"><span>ü•É</span>No matches found</div>`;resultCount.textContent='';return;}
            resultCount.textContent=`${items.length} result${items.length!==1?'s':''}`;
            resultsContainer.innerHTML=items.map((faq,index)=>{const realIndex=faqs.indexOf(faq);return`<div class="faq-item" data-index="${realIndex}"><div class="faq-header"><div class="faq-header-left"><span class="faq-category">${faq.category}</span><div class="faq-question">${faq.question}</div></div><button class="edit-btn" onclick="openEdit(${realIndex});event.stopPropagation();">Edit</button><span class="faq-toggle">+</span></div><div class="faq-answer">${faq.answer}</div></div>`;}).join('');
            document.querySelectorAll('.faq-item').forEach(item=>{item.addEventListener('click',(e)=>{if(!e.target.classList.contains('edit-btn')){item.classList.toggle('expanded');}});});
        }
        function search(query){
            if(!query.trim()){renderFAQs(faqs);return;}
            const terms=query.toLowerCase().split(/\s+/);
            const scored=faqs.map(faq=>{const text=`${faq.category} ${faq.question} ${faq.answer}`.toLowerCase();let score=0;terms.forEach(term=>{if(text.includes(term)){score+=1;if(faq.question.toLowerCase().includes(term))score+=2;if(faq.category.toLowerCase().includes(term))score+=1;}});return{faq,score};});
            const matches=scored.filter(item=>item.score>0).sort((a,b)=>b.score-a.score).map(item=>item.faq);
            renderFAQs(matches);
        }
        document.getElementById('adminLink').addEventListener('click',()=>{
            if(isAdminMode){isAdminMode=false;document.body.classList.remove('admin-mode');renderFAQs(faqs);}
            else{document.getElementById('passwordModal').classList.add('active');document.getElementById('passwordInput').value='';setTimeout(()=>document.getElementById('passwordInput').focus(),100);}
        });
        function checkPassword(){const pwd=document.getElementById('passwordInput').value;if(pwd===ADMIN_PASSWORD){isAdminMode=true;document.body.classList.add('admin-mode');closeModal('passwordModal');renderFAQs(faqs);}else{alert('Wrong password');}}
        document.getElementById('passwordInput').addEventListener('keyup',(e)=>{if(e.key==='Enter')checkPassword();});
        document.getElementById('addBtn').addEventListener('click',()=>{editingIndex=-1;document.getElementById('editTitle').textContent='Add FAQ';document.getElementById('editCategory').value='';document.getElementById('editQuestion').value='';document.getElementById('editAnswer').value='';document.getElementById('deleteBtn').style.display='none';document.getElementById('editModal').classList.add('active');});
        function openEdit(index){editingIndex=index;const faq=faqs[index];document.getElementById('editTitle').textContent='Edit FAQ';document.getElementById('editCategory').value=faq.category;document.getElementById('editQuestion').value=faq.question;document.getElementById('editAnswer').value=faq.answer;document.getElementById('deleteBtn').style.display='block';document.getElementById('editModal').classList.add('active');}
        function saveFAQ(){const category=document.getElementById('editCategory').value.trim();const question=document.getElementById('editQuestion').value.trim();const answer=document.getElementById('editAnswer').value.trim();if(!category||!question||!answer){alert('Please fill in all fields');return;}if(editingIndex===-1){faqs.unshift({category,question,answer});}else{faqs[editingIndex]={category,question,answer};}saveFAQsToStorage();closeModal('editModal');document.getElementById('search').value='';renderFAQs(faqs);}
        function deleteFAQ(){if(confirm('Delete this FAQ?')){faqs.splice(editingIndex,1);saveFAQsToStorage();closeModal('editModal');document.getElementById('search').value='';renderFAQs(faqs);}}
        function closeModal(id){document.getElementById(id).classList.remove('active');}
        window.openEdit=openEdit;
        document.getElementById('search').addEventListener('input',(e)=>search(e.target.value));
        loadFAQs();
    </script>
</body>
</html>
